title: |-
  Upload to Waldo
summary: |
  Uploads your build to Waldo.
description: |
  Uploads your build (`.app` or `.apk`) to Waldo.

  You must specify at least a build path and a Waldo upload token.

  Typically the build path is generated by a previous build Step in your
  Workflow. For example:

  - the **Xcode Build for Simulator** Step generates a `.app` at `$BITRISE_APP_DIR_PATH`
  - the **Android Build** Step generates a `.apk` at `$BITRISE_APK_PATH`

  Each application registered in Waldo is associated with a unique upload
  token. You can find the upload token for your app by going to the
  Documentation screen for your app in [Waldo](https://app.waldo.io/). This
  token _should_ be specified as a _secret_ environment variable.
website: https://github.com/waldoapp/bitrise-step-waldo-upload
source_code_url: https://github.com/waldoapp/bitrise-step-waldo-upload
support_url: https://github.com/waldoapp/bitrise-step-waldo-upload/issues
project_type_tags:
  - ios
  - android
  - react-native
  - cordova
  - ionic
  - flutter
type_tags:
  - test
is_always_run: false
is_skippable: false
run_if: ""
toolkit:
  go:
    package_name: github.com/waldoapp/bitrise-step-waldo-upload
inputs:
  - build_path:
    opts:
      title: Build path
      summary: The path to your `.app` or `.apk` build.
      description: |
        Typically this path is generated by a previous build Step in your
        Workflow. For example:

        - the **Xcode Build for Simulator** Step generates a `.app` at `$BITRISE_APP_DIR_PATH`
        - the **Android Build** Step generates a `.apk` at `$BITRISE_APK_PATH`
      is_required: true
  - upload_token:
    opts:
      title: Upload token
      summary: The upload token associated with your app.
      description: |
        Each application registered in Waldo is associated with a unique upload
        token.
      is_required: true
      is_sensitive: true
  - variant_name:
    opts:
      title: "Variant name"
      summary: An optional variant name.
      description: |
        This is an arbitrary string to associate with this build.
      is_required: false
  - git_commit:
    opts:
      title: "Git commit"
      summary: The originating git commit hash.
      description: |
        This is the hash of the originating git commit (also known as the “git
        SHA”) for this build. If omitted, Waldo attempts to infer the git
        commit from the CI provider (if any) or from the current git repository
        (if accessible).
      category: git configuration
      is_required: false
  - git_branch:
    opts:
      title: "Git branch"
      summary: The originating git commit branch name.
      description: |
        This is the branch name (if any) of the originating git commit for this
        build. If omitted, Waldo attempts to infer the git branch name from the
        CI provider (if any) or from the current git repository (if
        accessible).
      category: git configuration
      is_required: false
  - is_debug_mode: "no"
    opts:
      title: Debug mode?
      summary: Print additional debug information?
      description: |
        If this mode is enabled, additional debug information is printed.
      category: Debug
      is_required: false
      value_options:
        - "yes"
        - "no"
outputs:
- WALDO_BUILD_ID:
  opts:
    title: "Build ID"
    summary: The ID of the uploaded build.
    description: |
      This is a unique identifier for the build that you just uploaded. Empty if
      the upload failed.
